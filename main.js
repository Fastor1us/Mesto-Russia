(()=>{"use strict";function e(e,t,r){!function(e){return e.some((function(e){return!e.validity.valid}))}(e)?(t.classList.remove(r.inactiveButtonClass),t.removeAttribute("disabled")):(t.classList.add(r.inactiveButtonClass),t.setAttribute("disabled",!0))}var t=document.querySelector("#card-template").content;function r(e,r){var n=t.querySelector(".cards__item").cloneNode(!0),o=n.querySelector(".cards__image");return n.querySelector(".cards__title").textContent=e,o.setAttribute("alt",e),o.setAttribute("src",r),n}function n(e){e.classList.add("popup_opened"),c()}function o(e){e.classList.remove("popup_opened"),document.removeEventListener("keydown",i),document.removeEventListener("mousedown",i)}function c(){document.addEventListener("keydown",i),document.addEventListener("mousedown",i)}function i(e){"keydown"===e.type&&"Escape"===e.key&&s()&&o(s()),"mousedown"===e.type&&e.target.classList.contains("popup")&&o(s())}function s(){return document.querySelector(".popup_opened")}var u=document.querySelector(".popup__image"),a=document.querySelector("#popup-image"),p=document.querySelector(".popup__figcaption"),l=document.querySelectorAll(".popup__close-button"),d=document.querySelector("#popup-profile"),_=d.querySelector("#popup-profile-title"),m=d.querySelector("#popup-profile-description"),v=document.querySelector("#popup-card"),f=v.querySelector("#popup-card-name"),y=v.querySelector("#popup-card-link"),S=document.querySelector(".profile"),q=S.querySelector(".profile__title"),b=S.querySelector(".profile__subtitle"),g=S.querySelector(".profile__edit-button"),k=S.querySelector(".profile__add-button"),L=document.querySelector(".cards__list"),E={formSelector:".popup__form",inputSelector:".popup__text-input",submitButtonSelector:".popup__confirm-button",inactiveButtonClass:"popup__confirm-button_inactive",inputErrorClass:"popup__text-input_type_error",errorClass:"popup__input-error_active"};!function(t){Array.from(document.querySelectorAll(t.formSelector)).forEach((function(r){!function(t,r){var n=Array.from(t.querySelectorAll(r.inputSelector)),o=t.querySelector(r.submitButtonSelector);e(n,o,r),n.forEach((function(c){c.addEventListener("input",(function(){!function(e,t,r){t.validity.valid?function(e,t,r){var n=e.querySelector(".".concat(t.id,"-error"));t.classList.remove(r.inputErrorClass),n.classList.remove("popup__input-error_active"),n.textContent=""}(e,t,r):function(e,t,r,n){var o=e.querySelector(".".concat(t.id,"-error"));t.classList.add(n.inputErrorClass),o.textContent=r,o.classList.add("popup__input-error_active")}(e,t,t.validationMessage,r)}(t,c,r),e(n,o,r)}))}))}(r,t)}))}(E),[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(e){L.append(r(e.name,e.link))})),g.addEventListener("click",(function(){n(d),function(e,t,r,n){e.value=r.textContent,t.value=n.textContent;var o=new Event("input");e.dispatchEvent(o),t.dispatchEvent(o)}(_,m,q,b)})),k.addEventListener("click",(function(){n(v),e([f,y],v.querySelector(E.submitButtonSelector),E)})),l.forEach((function(e){e.addEventListener("click",(function(){o(e.closest(".popup"))}))})),L.addEventListener("click",(function(e){!function(e){e.target.classList.contains("cards__button-like")&&(e.target.classList.toggle("cards__button-like_active"),e.target.blur())}(e),function(e){e.target.classList.contains("cards__wastebasket")&&e.target.closest(".cards__item").remove()}(e),function(e){e.target.classList.contains("cards__image")&&(n(a),c(),u.setAttribute("src",e.target.getAttribute("src")),u.setAttribute("alt",e.target.closest(".cards__item").querySelector(".cards__title").textContent),p.textContent=e.target.closest(".cards__item").querySelector(".cards__title").textContent)}(e)})),d.addEventListener("submit",(function(e){var t,r,n;e.preventDefault(),t=_,r=b,n=m,q.textContent=t.value,r.textContent=n.value,o(d)})),v.addEventListener("submit",(function(e){e.preventDefault(),L.prepend(r(f.value,y.value)),e.target.reset(),o(v)}))})();